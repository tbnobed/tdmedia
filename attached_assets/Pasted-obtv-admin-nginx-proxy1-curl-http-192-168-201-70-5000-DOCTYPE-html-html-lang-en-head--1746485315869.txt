obtv-admin@nginx-proxy1:~$ curl http://192.168.201.70:5000
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
    <title>Trilogy Digital Media</title>
    <script src="/config.js"></script>
    <!-- We'll dynamically load the CSS file based on what we find -->
    <script>
      // Dynamically load CSS file
      function loadCss() {
        // First try to load from asset manifest
        fetch('/assets/manifest.json')
          .then(response => {
            if (response.ok) return response.json();
            throw new Error('Asset manifest not found');
          })
          .then(manifest => {
            if (manifest && manifest.assets && manifest.assets.length > 0) {
              // Find CSS file in manifest
              const cssAsset = manifest.assets.find(asset => asset.endsWith('.css'));
              if (cssAsset) {
                console.log('Found CSS file in manifest:', cssAsset);
                loadStylesheet(cssAsset);
                return;
              }
            }
            throw new Error('No CSS assets found in manifest');
          })
          .catch(err => {
            console.warn('Could not load CSS from manifest:', err.message);
            console.log('Falling back to directory scanning for CSS...');

            // Fallback: Look for CSS files in assets directory
            fetch('/assets/')
              .then(response => {
                if (!response.ok) throw new Error('Failed to load assets directory');
                return response.text();
              })
              .then(html => {
                // Simple regex to find CSS files
                const cssFiles = html.match(/href="([^"]+\.css)"/g) || [];
                if (cssFiles.length > 0) {
                  // Extract the first CSS filename
                  const cssFile = cssFiles[0].match(/href="([^"]+)"/)[1];
                  console.log('Found CSS file:', cssFile);
                  loadStylesheet(cssFile);
                } else {
                  console.warn('No CSS files found in assets directory');
                }
              })
              .catch(err => {
                console.error('Error loading CSS:', err);
              });
          });

        function loadStylesheet(href) {
          // Create and append the CSS link
          const link = document.createElement('link');
          link.rel = 'stylesheet';
          link.href = href;
          document.head.appendChild(link);
        }
      }

      // Try to load CSS when the page loads
      document.addEventListener('DOMContentLoaded', loadCss);
    </script>
    <style>
      body {
        font-family: Arial, sans-serif;
        background-color: #f0f0f0;
        color: #333;
        margin: 0;
        padding: 0;
      }
      .loading-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100vh;
        text-align: center;
      }
      .spinner {
        border: 4px solid rgba(0, 0, 0, 0.1);
        width: 36px;
        height: 36px;
        border-radius: 50%;
        border-left-color: #09f;
        animation: spin 1s linear infinite;
        margin-bottom: 20px;
      }
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
    </style>
  </head>
  <body>
    <div id="root">
      <div class="loading-container">
        <div class="spinner"></div>
        <h1>Trilogy Digital Media</h1>
        <p>Loading application...</p>
        <script>
          // Capture runtime errors
          window.onerror = function(message, source, lineno, colno, error) {
            console.error('Runtime error:', message, 'at', source, lineno, colno);
            document.querySelector('.loading-container p').innerHTML =
              'Error: ' + message + '<br><small>Please check console for details</small>';
            return false;
          };

          // Simple check to see if the app is loading
          document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM fully loaded');

            // Check if config is properly loaded
            if (!window.TRILOGY_CONFIG) {
              console.error('TRILOGY_CONFIG not found!');
              document.querySelector('.loading-container p').textContent =
                'Configuration error. Please check console for details.';
              return;
            }

            // Debug info
            console.log('Attempting to load application in Docker environment');

            // Function to find and load the main JS file
            function loadMainScript() {
              // First try to load from asset manifest
              fetch('/assets/manifest.json')
                .then(response => {
                  if (response.ok) return response.json();
                  throw new Error('Asset manifest not found');
                })
                .then(manifest => {
                  if (manifest && manifest.assets && manifest.assets.length > 0) {
                    // Find JS file in manifest
                    const jsAsset = manifest.assets.find(asset => asset.endsWith('.js'));
                    if (jsAsset) {
                      console.log('Found JS file in manifest:', jsAsset);
                      loadScript(jsAsset);
                      return;
                    }
                  }
                  throw new Error('No JS assets found in manifest');
                })
                .catch(err => {
                  console.warn('Could not load from manifest:', err.message);
                  console.log('Falling back to directory scanning...');

                  // Fallback: Try to find the main JS file in the assets directory
                  fetch('/assets/')
                    .then(response => {
                      if (!response.ok) throw new Error('Failed to load assets directory');
                      return response.text();
                    })
                    .then(html => {
                      // Look for JS files in the assets directory
                      const jsFiles = html.match(/href="([^"]+\.js)"/g) || [];
                      if (jsFiles.length > 0) {
                        // Extract the first JS filename
                        const jsFile = jsFiles[0].match(/href="([^"]+)"/)[1];
                        console.log('Found JS file:', jsFile);
                        loadScript(jsFile);
                      } else {
                        console.error('No JS files found in assets directory');
                        document.querySelector('.loading-container p').textContent =
                          'Error: No JavaScript files found in assets directory.';
                      }
                    })
                    .catch(err => {
                      console.error('Error loading JS:', err);
                      document.querySelector('.loading-container p').textContent =
                        'Error loading assets: ' + err.message;
                    });
                });

              function loadScript(src) {
                // Create and append the script
                const script = document.createElement('script');
                script.src = src;
                script.type = 'module';
                script.onerror = function(e) {
                  console.error('Failed to load main script:', e);
                  document.querySelector('.loading-container p').textContent =
                    'Error loading application. Please check console for details.';
                };
                script.onload = function() {
                  console.log('Main script loaded successfully');
                };
                document.body.appendChild(script);
              }
            }

            // Try to load the main script
            try {
              loadMainScript();
            } catch (e) {
              console.error('Error while setting up script loader:', e);
              document.querySelector('.loading-container p').textContent =
                'Error initializing application. Please check console for details.';
            }
          });
        </script>
      </div>
    </div>
  </body>
</html>